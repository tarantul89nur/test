function removeAsk(e){$(e).parent().remove(),numbering()}function removeQue(e){$(e).parent().parent().remove(),interviewIdChoice()}function addAnswer(){$(".modal__answers").append('<div class="modal__table-item"><span class="modal__table-item-number"></span><input type="text" class="modal__table-item-text"><input type="radio" value="" name="answer" class="modal__table-item-radio" onchange="inputTrue();"><label class="modal__table-item-label-radio">Выбрать</label><input type="checkbox" value="" class="modal__table-item-checkbox" onchange="inputTrue();"><label class="modal__table-item-label-checkbox">Выбрать</label><input type="text" class="modal__table-item-true"><span class="modal__span" onclick="removeAsk(this)"><svg width="20px" height="20px" class="modal__svg-del"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#delete"></use></svg></span></div>')}function ansTypeChange(){$(".modal__table-item-radio").prop("checked",!1),$(".modal__table-item-checkbox").prop("checked",!1),$(".modal__table-item-true").attr("value",""),"Один верный"==$("#ansType").val()?($(".modal__table-item-label-radio").show(),$(".modal__table-item-label-checkbox").hide()):($(".modal__table-item-label-radio").hide(),$(".modal__table-item-label-checkbox").show())}function numbering(){for(var e=document.querySelectorAll(".modal__table-item-number"),t=document.querySelectorAll(".modal__table-item-checkbox"),l=document.querySelectorAll(".modal__table-item-label-checkbox"),a=document.querySelectorAll(".modal__table-item-radio"),i=document.querySelectorAll(".modal__table-item-label-radio"),o=0;o<e.length;o++)$(e).eq(o).text(o+1+")"),$(t).eq(o).val(o+1+")"),$(t).eq(o).attr("id","itemCheckbox"+o),$(l).eq(o).attr("for","itemCheckbox"+o),$(a).eq(o).val(o+1+")"),$(a).eq(o).attr("id","itemRadio"+o),$(i).eq(o).attr("for","itemRadio"+o)}function interviewIdChoice(){for(var e=document.querySelectorAll(".interview-form__checkbox-choice"),t=document.querySelectorAll(".interview-form__label-choice"),l=document.querySelectorAll(".interview-form__svg-choices-edit"),a=0;a<e.length;a++)$(e).eq(a).attr("id","choiceQue"+a),$(t).eq(a).attr("for","choiceQue"+a),$(l).eq(a).attr("id","choiceQue"+a)}function inputTrue(){$(".modal__table-item-true").attr("value","");for(var e=document.querySelectorAll(".modal__table-item-true"),t=document.querySelectorAll(".modal__table-item-checkbox"),l=document.querySelectorAll(".modal__table-item-radio"),a=0;a<e.length;a++)($(t[a]).is(":checked")||$(l[a]).is(":checked"))&&$(e[a]).attr("value","Верный")}function checkSaveBtn(){0!=$("#testName").val().length?$("#saveQuestions").removeAttr("disabled"):$("#saveQuestions").attr("disabled","disabled")}function ready(){masAllReady.question=[],masAllReady.typeAnswer=[],masAllReady.answer=[],masAllReady.trueAnswer=[];var e=document.querySelector("#queName"),t=document.querySelector("#ansType"),l=document.querySelectorAll(".modal__table-item-text"),a=document.querySelectorAll(".modal__table-item-true");masAllReady.question.push(e.value),masAllReady.typeAnswer.push(t.value);for(var i=0;i<l.length;i++)masAllReady.answer.push(l[i].value),masAllReady.trueAnswer.push(a[i].value);$(".modal").hide(),$(".shadow").hide(),$(".modal__btn-save").hide(),$(".modal__table-item").remove(),$(".interview-form__table tbody").append('<tr class="interview-form__table-row"><td class="interview-form__td-choice"><input type="checkbox" class="interview-form__checkbox-choice"><label class="interview-form__label-choice">Выбрать</label></td><td class="interview-form__td-issue"></td><td  class="interview-form__issue-info"><input type="text" class="interview-form__issue-info-input"></td><td class="interview-form__td-edit"><svg width="20px" height="20px" class="interview-form__svg-choices-edit" onclick="edit(this);"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#pencil"></use></svg></td><td class="interview-form__td-del"><svg width="20px" height="20px" class="interview-form__svg-choice-del" onclick="removeQue(this)"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#delete"></use></svg></td></tr>'),interviewIdChoice(),$(".interview-form__table-row:last-child .interview-form__td-issue").text(e.value),$(".interview-form__table-row:last-child .interview-form__issue-info-input").text(JSON.stringify(masAllReady))}function edit(e){editId=$(e).attr("id");var t=$(e).parent().parent().find(".interview-form__issue-info").find(".interview-form__issue-info-input"),l=JSON.parse(t.text());$("#queName").val(""),$(".modal").show(),$(".shadow").show(),$(".modal__btn-edit-save").show();for(var a=0;a<l.answer.length;a++)addAnswer();numbering();var i=document.querySelector("#queName"),o=document.querySelector("#ansType"),r=document.querySelectorAll(".modal__table-item-text"),n=document.querySelectorAll(".modal__table-item-true");i.value=l.question,o.value=l.typeAnswer,ansTypeChange(),inputTrue();var c=l.answer.length;for(a=0;a<c;a++)r[a].value=l.answer[a],n[a].value=l.trueAnswer[a];var s=document.querySelectorAll(".modal__table-item-checkbox"),d=document.querySelectorAll(".modal__table-item-radio");if("Один верный"==o.value)for(a=0;a<n.length;a++)"Верный"==n[a].value&&$(d[a]).click();else for(a=0;a<n.length;a++)"Верный"==n[a].value&&$(s[a]).click()}function editSave(){masAllReady.question=[],masAllReady.typeAnswer=[],masAllReady.answer=[],masAllReady.trueAnswer=[];var e=document.querySelector("#queName"),t=document.querySelector("#ansType"),l=document.querySelectorAll(".modal__table-item-text"),a=document.querySelectorAll(".modal__table-item-true");masAllReady.question.push(e.value),masAllReady.typeAnswer.push(t.value);for(var i=0;i<l.length;i++)masAllReady.answer.push(l[i].value),masAllReady.trueAnswer.push(a[i].value);$(".modal").hide(),$(".shadow").hide(),$(".modal__btn-edit-save").hide(),$(".modal__table-item").remove(),$("#"+editId).parent().parent().find(".interview-form__td-issue").text(e.value),$("#"+editId).parent().parent().find(".interview-form__issue-info-input").text(JSON.stringify(masAllReady))}function mainSave(){formSave=JSON.parse('{"nameTest" : [], "category" : [], "infoIssue" : []}'),formSave.nameTest=[],formSave.category=[],formSave.infoIssue=[];var e=document.querySelector("#testName"),t=document.querySelector("#testCategory"),l=document.querySelectorAll(".interview-form__issue-info-input");formSave.nameTest.push(e.value),formSave.category.push(t.value);for(var a=0;a<l.length;a++)l[a].value=$(".interview-form__issue-info-input").text(),formSave.infoIssue.push(l[a].value);alert("Данные занесены в объект")}$(document).ready(function(){masAllReady=JSON.parse('{"question" : [], "typeAnswer" : [], "answer" : [], "trueAnswer" : []}')}),$("#formTextDel").click(function(){$("#testName").val(""),$("#saveQuestions").attr("disabled","disabled")}),$("#modalTextDel").click(function(){$("#queName").val("")}),$("#formBtnAdd").click(function(){$("#queName").val(""),$(".modal").show(),$(".shadow").show(),$(".modal__btn-save").show();for(var e=0;e<4;e++)addAnswer();ansTypeChange(),numbering(),inputTrue()}),$("#btnClose").click(function(){$(".modal").hide(),$(".shadow").hide(),$(".modal__btn-save").hide(),$(".modal__btn-edit-save").hide(),$(".modal__table-item").remove()}),$("#btnAdd").click(function(){addAnswer(),ansTypeChange(),numbering(),inputTrue()}),$("#modalSave").click(function(){ready()}),$("#modalEditSave").click(function(){editSave()}),$("#saveQuestions").click(function(){mainSave()}),$("#allChoice").change(function(){var e=document.querySelectorAll(".interview-form__checkbox-choice");if($("#allChoice").is(":checked"))for(x=0;x<e.length;x++)$(e[x]).click(),$(e[x]).is(":checked")||$(e[x]).click();else for(x=0;x<e.length;x++)$(e[x]).click(),$(e[x]).is(":checked")&&$(e[x]).click()}),$("#rowDel").click(function(){var e=document.querySelectorAll(".interview-form__checkbox-choice");for(x=0;x<e.length;x++)$(e[x]).is(":checked")&&$(e[x]).parent().parent().remove();$("#allChoice").is(":checked")&&$("#allChoice").click()});